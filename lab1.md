## การทดลองที่1 เรื่อง การเขียนโปรแกรมเพื่อรันบนไมโครคอนโทรเลอร์

## วัตถุประสงค์
1. เพื่อศึกษาการเขียนและการรันโปรแกรมจากไมโครคอนโทรลเลอร์
2. เพื่อศึกษาคำสั่งต่างๆของโค้ดโปรแกรม
3. เพื่อศึกษาองค์ประกอบและข้อมูลพื้นฐานของไมโครคอนโทรลเลอร์
 
## อุปกรณ์ที่ใช้
1. microcontroller ESP-01 ประกอบด้วย CPU เสาอากาศสำหรับ wifi
2. อุปกรณ์เชื่อมต่อ USB เข้าไปยัง serial

## ศึกษาข้อมูลเบื้องต้น
https://youtu.be/NLIUsWLEpmg

## วิธีการทำการทดลอง
1. เขียนโปรแกรมบน microcontroller โดยทำการเสียบ microcontroller เข้าทาง serial port ขอบ USB
2. ดูตัวอย่างโปรแกรมที่folder pattani 
  
  • พิมพ์ cd pattani เพื่อไปยังโฟลเดอร์
  
  • แสดงโฟลเดอร์ ซึ่งจะมีโปรแกรมตัวอย่าง 9 โปรแกรม
  
  • ไปที่ตัวอย่างที่ 1
  
    • พิมพ์ vi src/main.cpp
3. แสดงผลโปรแกรม โดยมี 15 บรรทัด 2 ส่วน
  
  • set up 1 ครั้งโดยการ set up serial port ที่ความเร็ว 115200
  
  • ใน loop แสดงให้เห็นถึงการวนไปเรื่อยๆในบรรทัดต่างๆจะประกอบด้วย cnt++(หมายถึงการนับเพิ่มขึ้นเรื่อยๆ) Serial.printf("PATTANI :%d\n",cnt)(แทนคำสั่ง การแสดงผลตัวแปลcountออกมา)
4. เข้าไปที่  configuration file ใน program
  
  • พิมพ์ vi platformio.ini เพื่อแสดงข้อมูล
  
  • platform แสดงถึง เทคโนโลยีของบริษัทผู้ผลิต
  
  • framwork แสดงถึง วิธีการเขียนโปรแกรม
  
  • upload port แสดงถึง port ที่ใช้ติดต่อ ในกรณีนี้เป็น windows จึงแสดงว่า COM3หรือCOM4
5. อัพโหลดโปรแกรม 01_Serial Monitor เข้าไปยัง Microcontroller โดยใช้คำสั่ง upload
  
  • พิมพ์ pio run -t upload
  
  • ในขณะที่ program กำลังรันข้อมูล เพื่อให้ microcontroller รันโปรแกรมใหม่เข้าไป กดปุ่มสีดำเพื่อให้เกิดการโหลด และกดปุ่มสีแดงเพื่อให้เกิดการรีเซ็ท
  
  • อัพโหลดเข้าตัว microcontroller เสร็จสิ้น
  
  • สังเกตผลลัพธ์ที่แสดงผ่านคอมพิวเตอร์ พิมพ์ pio device monitor โดย PATTANI แสดงถึงตัวแปร count ที่ถูก impliment ไปเรื่อยๆโดยแสดงผลทุกๆ 1 วินาที
  
  • กดปุ่มสีแดง เพื่อทำการ reset โปรแกรมโดยโปรแกรมจะหยุดทำงานและเริ่มนับ 1 ใหม่

## การบันทึกผลการทดลอง
  คำสั่ง src/main.cpp แสดงผลลัพธ์ของดปรแกรมส่วน set up & loop
  
  คำสั่ง platformio.ini แสดงข้อมูลใน configuration
  
  คำสั่ง pio run -t upload แสดงการรันข้อมูลในตัวอย่าง
  
  คำสั่ง pio device monitor แสดง PATTANI ที่เพิ่มขึ้นใน 1 วินาที
  
  คำสั่ง กดปุ่มสีดำ เพื่อให้เกิดการโหลด 
  
  คำสั่ง กดปุ่มสีแดง เพื่อให้เกิดการรีเซ็ท
  
## อภิปรายผลการทดลอง
  • platformio สามารถใช้เขียนโปรแกรมจาก microcontroller จากหลายชนิดที่มีบริษัทต่างกันได้ 
  
  • pio run -t upload นั้นใช้ในการอัพโหลดข้อมูลไปยัง microcontroller โดยสามารถกดปุ่มภานอกเพื่อทำการโหลดและรีเซ็ทการรันโปรแกรมได้

## คำถามหลังการทดลอง 
 คำถาม : กดปุ่มสีดำบนตัว microcontroller จะเกิดอะไรขึ้น ?
 คำตอบ : เพื่อให้เกิดการโหลด
 
